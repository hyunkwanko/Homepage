<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <title>Everyolo</title>

        <link rel="stylesheet" href="../../static/css/bootstrap.min.css">
        <link rel="stylesheet" href="../../static/css/particles.css">
        <link rel="stylesheet" href="../../static/css/fakeLoader.css">
        <link rel="stylesheet" href="../../static/css/Footer-Dark.css">
        <link rel="stylesheet" href="../../static/css/semantic.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
        <link href="https://fonts.googleapis.com/css?family=Saira" rel="stylesheet">
    </head>

    <div id="particles-js"></div>

    <body id="page-top">
        <div class="fakeLoader"></div>

        <nav class="navbar navbar-light navbar-expand-md navbar navbar-expand-lg fixed-top" id="mainNav">
            <link rel="html-import" href="../../nav.html">
        </nav>

        <link rel="html-import" href="../../header.html">
        
        <div id="about" class="container-fluid text-center">
            <div class="row">
                <div class="col-sm-2"></div>        
                <div class="col-sm-7" style="margin: 30px 0;"><p style="font-size:3em; font-family: 'Saira', sans-serif;">[Deepfake]</p></div>        
                <div class="col-sm-3"></div>
            </div>
        </div>

        <div class="container-fluid text-center" style="padding-bottom:50px;">                      
            <div class="row">
                <div class="col-sm-2"></div>        
                <div class="col-sm-7 border-right border-left">
                    <div class="ui form">
                        <div class="ui message">
                            <div class="header">Computer Environment</div>
                            <ul class="list">
                                <li>Windows 10 Enterprise 64bit </li>
                                <li>NVIDIA GeForce GTX 1060 6GB</li>
                                <li>Anaconda</li>
                                <li>Python 3.6</li>
                                <li>June 29, 2019 Posted</li>
                            </ul>
                        </div>
                    </div>

                    <br>
                    <div class="shadow p-3 mb-5 bg-white rounded" style="color:#000; text-align: left !important;">
                        <p style="text-align: center;"><i class="fas fa-square"></i>&emsp;Deepfake 모델</p><br>
                        <div clase="container">
                            &emsp;Deepfake 모델은 오픈소스로 Face-Swap하는데 있어서 AutoEncoder를 포함하는 주요 3가지 기능을 제공한다.
                            Input 데이터로 영상 A, B를 제공하면 데이터셋을 위한 전처리 과정으로 Extract 기능을 사용한다.
                            MTCNN을 사용해서 데이터의 얼굴을 감지하고 256 * 256 크기의 이미지로 정렬된 이미지를 얻는다.
                            영상 A와 B에서 추출한 얼굴 데이터들을 Train 기능을 통해 학습 모델을 생성한다.
                            이 과정에서 훈련 반복 횟수와 신경망의 크기 등에 따라 학습 시간이 천차만별로 차이가 난다.
                            모델을 생성하는데 성공했으면 다음은 본격적으로 Face-Swap 작업을 행한다.
                            Convert 기능을 사용해 진행하는데 Deepfake에서는 Frame, Blur 등 Mask에 대해 최적화할 수 있도록 다양한 기능을 제공한다.
    
                            <br><br>&emsp;Deepfake 모델의 장점은 기능들이 독립적으로 구현되어있어 테스트 과정에서 다양한 시도를 쉽게 해볼 수 있다. 
                            그리고 전처리 과정에서 다양하고, 많은 데이터셋을 구비한다면 결과가 정말 자연스럽다는 점이다.
                            단점으로는 Train 과정에서 화질이 저하가 되는데 그 이유는 GPU 메모리에 네트워크를 한 번에 적재할 수 없기 때문에 256 * 256으로 학습을 할 수 없었다.
                            GPU의 성능에 따라 256 * 256의 이미지들을 적재할 수 있지만 컴퓨터의 성능이 뛰어나야한다.
                            다시 말해서, 컴퓨터 성능에 따라 결과가 바뀔 수 있다는 것이다. 
                            그리고 Train 과정에서 모델을 생성하는데 많은 시간이 소요되며 합성하고자하는 얼굴마다 모델을 재학습이 필요하므로 범용성이 떨어진다.
                        </div>
                    </div>
                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;Install
                    <br><br><i class="fas fa-angle-right"></i>&emsp;</div>
                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;기본적으로 Deepfake는 2개의 Video를 Input으로 받아 합성된 1개의 Video를 생성한다. 
                    <br><br><i class="fas fa-square"></i>&emsp;3가지의 기능으로 구성된다. Extract, Train, Convert이다.</div>
                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;Extract</div>

                    <div class="ui warning message" style="text-align: left !important; width: 80%; margin: 0 auto;">
                        <i class="fas fa-code" style="float:right;"></i><br>

                        <p><pre style="color:#0004ffab;">// 첫 번째 입력받은 영상에서 Face alignment를 한 후 MTCNN으로 얼굴 데이터를 추출하는 명령어이다.</pre></p>

                        python faceswap.py extract –i [Video Location] -o [Extracted Images Directory Location]<br><br>

                        <p><pre style="color:#0004ffab;">// 같은 방식으로 또 다른 영상에서도 얼굴 데이터를 추출한다.</pre></p>

                        <p><pre style="color:#0004ffab;">// Extract에 다양한 옵션들을 제공한다 <i class="fas fa-arrow-right"></i> python faceswap.py extract -h </pre></p>
                    </div><br><br>

                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;Train</div>

                    <div class="ui warning message" style="text-align: left !important; width: 80%; margin: 0 auto;">
                        <i class="fas fa-code" style="float:right;"></i><br>

                        <p><pre style="color:#0004ffab;">// 두 영상으로부터 추출된 얼굴 데이터를 Train한다.</pre></p>

                        <p><pre style="color:#0004ffab;">// 얼굴이 자연스럽게 합성되도록 Model을 생성하는 단계이다. 시간이 오래 소요된다.</pre></p>

                        python faceswap.py train –A [Video1 Extracted Images Location] -B [Video2 Extracted Images Location] -m [Model Location]<br><br>
                                                
                        <p><pre style="color:#0004ffab;">// Train에도 다양한 옵션들을 제공한다 <i class="fas fa-arrow-right"></i> python faceswap.py train -h </pre></p>
                    </div><br><br>

                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;Convert</div>

                    <div class="ui warning message" style="text-align: left !important; width: 80%; margin: 0 auto;">
                        <i class="fas fa-code" style="float:right;"></i><br>

                        <p><pre style="color:#0004ffab;">// 생성된 Model을 가지고 얼굴을 합성하는 단계이다.</pre></p>

                        python faceswap.py convert -i [Video1 Location] -o [Output Video Location] -m [Created Model Location]<br><br>
                                                
                        <p><pre style="color:#0004ffab;">// Output Directory에 Converted Images이 생성되는 것을 확인한다.</pre></p>
                        
                        <p><pre style="color:#0004ffab;">// Train에도 다양한 옵션들을 제공한다 <i class="fas fa-arrow-right"></i> python faceswap.py convert -h</pre></p>
                    </div><br><br>

                    <br><div class="shadow p-3 mb-5 bg-white rounded" style="color:#000"><i class="fas fa-square"></i>&emsp;FFMPEG</div>

                    <div class="ui warning message" style="text-align: left !important; width: 80%; margin: 0 auto;">
                        <i class="fas fa-code" style="float:right;"></i><br>

                        <p><pre style="color:#0004ffab;">// Convert에서 Output Directory에 합성된 Image들이 생성된 것을 확인한 후</pre></p>
                        <p><pre style="color:#0004ffab;">// 이 Image들을 Image to Video 과정을 통해 최종 결과 Video를 얻어야 한다.</pre></p>
                        <p><pre style="color:#0004ffab;">// 이 과정에서 ffmpeg을 사용한다.</pre></p>

                        ffmpeg –i [Output Images] -c:v libx264 -vf "fps=25,format=yuv420p" [Output Video]
                    </div><br><br>

                    <div class="ui form">
                        <div class="ui message">
                            <div class="header" style="text-align:left">References</div><br>
                            <ul class="list">
                                <li>국립 부경대학교 IT융합응용공학과 윤요섭 교수님&emsp;<i class="fas fa-chevron-right"></i>&emsp;오픈소스소프트웨어 강의 中</li>
                                <li><a href="https://github.com/deepfakes/faceswap">Deepfake</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <link rel="html-import" href="../../menu.html">
                </div>
            </div>
        </div>

        <div class="container border-top">
            <div id="disqus_thread" style="margin: 35px 0;"></div>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>

        <link rel="html-import" href="../../footer.html">

        <script src="../../static/js/jquery.min.js"></script>
        <script src="../../static/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <script src="../../static/js/particles.js"></script>
        <script src="../../static/js/app.js"></script>
        <script src="../../static/js/fakeLoader.min.js"></script>
        <script src="../../static/js/semantic.min.js"></script>
        <script id="dsq-count-scr" src="//everyolo.disqus.com/count.js" async></script>
        <script async src="../../static/js/html-import.js"></script>
        <script src="../../static/js/grayscale.js"></script>
        <script src="../../static/js/sourcetree.js"></script>

        <!-- Disqus -->
        <script>
            (function() {
                var d = document, s = d.createElement('script');
                s.src = 'https://everyolo.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>

    </body>
</html>